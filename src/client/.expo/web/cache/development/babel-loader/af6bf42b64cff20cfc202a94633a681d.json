{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nvar _jsxFileName = \"/Users/mac/mob/InstaClone/src/Screens/Profile/Profile.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from 'react';\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { AsyncStorage } from \"react-native-web/dist/index\";\nimport { uploadpost as _uploadpost } from \"../../actions/postsActions\";\nimport swal from 'sweetalert';\nimport { TabView, TabBar, TabViewPagerScroll, TabViewPagerPan } from 'react-native-tab-view';\nimport PropTypes from 'prop-types';\nimport { image } from \"./utils\";\nimport profileStyles from \"./ProfileStyle\";\nexport var ImageProfil = require(\"./images/photo_cv.jpg\");\nvar styles = StyleSheet.create(_objectSpread({}, profileStyles));\nimport { Item, Input } from 'native-base';\nimport Posts from \"./Posts\";\nimport { connect } from 'react-redux';\nimport { NavigationContainer } from '@react-navigation/native';\nimport axios from 'axios';\nimport { logout as _logout } from \"../../actions/loginActions\";\nimport { Icon } from 'native-base';\n\nvar Profile = function (_Component) {\n  _inherits(Profile, _Component);\n\n  var _super = _createSuper(Profile);\n\n  function Profile(_props) {\n    var _this;\n\n    _classCallCheck(this, Profile);\n\n    _this = _super.call(this, _props);\n\n    _this.fetchUserDetails = function (user_id) {\n      console.log('dkhaaaal');\n      console.log(user_id);\n      axios({\n        method: 'post',\n        url: '/getUserDetails',\n        baseURL: 'http://localhost:3000',\n        data: {\n          userid: user_id\n        }\n      }).then(function (res) {\n        console.log(res);\n\n        _this.setState({\n          name: res.data.results[0].name\n        });\n\n        _this.setState({\n          url: res.data.results[0].url\n        });\n\n        _this.setState({\n          username: res.data.results[0].username\n        });\n\n        _this.setState({\n          bio: res.data.results[0].bio\n        });\n\n        _this.setState({\n          post: res.data.results[0].posts[0].urlpost\n        });\n\n        var reversePosts = res.data.results[0].posts.reverse();\n\n        _this.setState({\n          posts: reversePosts\n        });\n\n        _this.setState({\n          followers: res.data.results[0].followers\n        });\n\n        _this.setState({\n          following: res.data.results[0].following\n        });\n\n        var followersnumber = _this.state.followers.length;\n        var followingnumber = _this.state.following.length;\n\n        var newroutes = _toConsumableArray(_this.state.tabs.routes);\n\n        newroutes[0].count = _this.state.posts.length - 1;\n        newroutes[1].count = followingnumber;\n        newroutes[2].count = followersnumber;\n\n        _this.setState({\n          tabs: _objectSpread(_objectSpread({}, _this.state.tabs), {}, {\n            newroutes: newroutes\n          })\n        });\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    };\n\n    _this.ModifyNumber = function (tabs) {\n      var newtabs = _toConsumableArray(tabs);\n\n      console.log(newtabs);\n\n      var newroutes = _toConsumableArray(newtabs.routes);\n\n      var newroute = _toConsumableArray(newroutes[0]);\n\n      newroute.count = reversePosts.length;\n\n      _this.setState({\n        tabs: newtabs\n      });\n    };\n\n    _this.Upload = function () {\n      swal({\n        title: 'Upload Post',\n        text: \"Url\",\n        content: {\n          element: \"input\",\n          attributes: {\n            value: \"Url\",\n            type: \"Url\"\n          }\n        },\n        button: {\n          text: \"Upload\",\n          closeModal: false\n        }\n      }).then(function (Url) {\n        var url = Url;\n        swal({\n          title: 'UploadPost:',\n          text: \"Description\",\n          icon: Url,\n          content: {\n            element: \"input\",\n            attributes: {\n              value: \"\",\n              type: \"Description\"\n            }\n          },\n          button: {\n            text: \"Upload\",\n            closeModal: false\n          }\n        }).then(function (Description) {\n          var description = Description;\n          axios({\n            method: 'post',\n            url: '/uploadpost',\n            baseURL: 'http://localhost:3000',\n            data: {\n              id: _this.state.id,\n              urlpost: url,\n              description: description,\n              date: new Date().toISOString()\n            }\n          }).then(function (res) {\n            var message = res.data.message;\n            console.log(message);\n\n            if (res.data.value) {\n              swal(message);\n            }\n          }).catch(function (err) {\n            return console.log(err);\n          });\n        });\n      });\n    };\n\n    _this.onPressPlace = function () {\n      console.log('place');\n    };\n\n    _this.LogOut = function () {\n      _this.props.logout();\n\n      _this.props.navigation.navigate('LogIn');\n    };\n\n    _this.handleIndexChange = function (index) {\n      _this.setState({\n        tabs: _objectSpread(_objectSpread({}, _this.state.tabs), {}, {\n          index: index\n        })\n      });\n    };\n\n    _this.renderTabBar = function (props) {\n      return React.createElement(TabBar, _extends({\n        indicatorStyle: styles.indicatorTab,\n        renderLabel: _this.renderLabel(props),\n        pressOpacity: 0.8,\n        style: styles.tabBar\n      }, props, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 12\n        }\n      }));\n    };\n\n    _this.renderLabel = function (props) {\n      return function (_ref) {\n        var route = _ref.route;\n        var routes = props.navigationState.routes;\n        var labels = [];\n        routes.forEach(function (e, index) {\n          labels.push(index === props.navigationState.index ? 'black' : 'gray');\n        });\n        var currentIndex = parseInt(route.key) - 1;\n        var color = labels[currentIndex];\n        return React.createElement(View, {\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 7\n          }\n        }, React.createElement(Animated.Text, {\n          style: [styles.tabLabelText, {\n            color: color\n          }],\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 9\n          }\n        }, route.count), React.createElement(Animated.Text, {\n          style: [styles.tabLabelNumber, {\n            color: color\n          }],\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 9\n          }\n        }, route.title));\n      };\n    };\n\n    _this.renderScene = function (_ref2) {\n      var key = _ref2.route.key;\n      var posts = _this.props.posts;\n\n      switch (key) {\n        case '1':\n          return _this.renderMansonry2Col();\n\n        case '2':\n          return React.createElement(View, {\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 327,\n              columnNumber: 19\n            }\n          }, \" \", React.createElement(ScrollView, {\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 327,\n              columnNumber: 26\n            }\n          }, \"  \", _this.following(), \" \"), \" \");\n\n        case '3':\n          return React.createElement(View, {\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 19\n            }\n          }, \" \", React.createElement(ScrollView, {\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 26\n            }\n          }, \"  \", _this.followers(), \" \"), \" \");\n\n        default:\n          return React.createElement(View, {\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 332,\n              columnNumber: 16\n            }\n          });\n      }\n    };\n\n    _this.following = function () {\n      return _this.state.following.map(function (user, index) {\n        return React.createElement(View, {\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 9\n          }\n        }, React.createElement(Text, {\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 9\n          }\n        }, \"  \", user.name.username, \"  \"), \" \");\n      });\n    };\n\n    _this.followers = function () {\n      return _this.state.followers.map(function (user, index) {\n        return React.createElement(View, {\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 9\n          }\n        }, React.createElement(Text, {\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 9\n          }\n        }, \"  \", user.name.username, \"  \"), \" \");\n      });\n    };\n\n    _this.renderContactHeader = function () {\n      return React.createElement(View, {\n        style: styles.headerContainer,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 7\n        }\n      }, React.createElement(View, {\n        style: styles.item,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 9\n        }\n      }, React.createElement(View, {\n        style: styles.userRow,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 9\n        }\n      }, React.createElement(Image, {\n        style: styles.userImage,\n        source: {\n          uri: _this.state.url\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 15\n        }\n      }))), React.createElement(View, {\n        style: styles.item2,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 11\n        }\n      }, React.createElement(View, {\n        style: {\n          height: 70,\n          marginTop: 10,\n          marginRight: 50\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 13\n        }\n      }, React.createElement(Button, {\n        title: \"logout\",\n        onPress: _this.LogOut,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 13\n        }\n      })), React.createElement(View, {\n        style: styles.userRow,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 5\n        }\n      }, React.createElement(Button, {\n        onPress: _this.Upload,\n        title: \"upload post\",\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 17\n        }\n      })), React.createElement(View, {\n        style: styles.userRow,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 11\n        }\n      }, React.createElement(View, {\n        style: styles.userNameRow,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 426,\n          columnNumber: 18\n        }\n      }, React.createElement(Text, {\n        style: styles.userNameText,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 428,\n          columnNumber: 23\n        }\n      }, _this.state.name)), React.createElement(View, {\n        style: styles.userNameRow,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 19\n        }\n      }, React.createElement(Text, {\n        style: styles.userNameText,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 432,\n          columnNumber: 23\n        }\n      }, \"@\", _this.state.username)), React.createElement(View, {\n        style: styles.userBioRow,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 19\n        }\n      }, React.createElement(Text, {\n        style: styles.userBioText,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 436,\n          columnNumber: 24\n        }\n      }, _this.state.bio)))));\n    };\n\n    _this.renderMansonry2Col = function () {\n      if (_this.state.posts.length < 2) {\n        return React.createElement(View, {\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 450,\n            columnNumber: 13\n          }\n        }, React.createElement(Text, {\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 450,\n            columnNumber: 19\n          }\n        }, \"AUCUN POST \"));\n      } else {\n        return React.createElement(View, {\n          style: styles.masonryContainer,\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 455,\n            columnNumber: 7\n          }\n        }, React.createElement(View, {\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 456,\n            columnNumber: 9\n          }\n        }, React.createElement(Posts, {\n          containerStyle: styles.sceneContainer,\n          posts: _this.state.posts,\n          userid: _this.state.id,\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 458,\n            columnNumber: 11\n          }\n        })));\n      }\n    };\n\n    _this.state = {\n      authToken: _this.props.authToken,\n      id: _this.props.userDetails,\n      name: \"\",\n      url: \"\",\n      description: \"\",\n      username: \"\",\n      urlpost: \"\",\n      bio: \"\",\n      post: \"\",\n      posts: [],\n      tabs: {\n        index: 0,\n        routes: [{\n          key: '1',\n          title: 'Posts',\n          count: '5'\n        }, {\n          key: '2',\n          title: 'following',\n          count: '192 M'\n        }, {\n          key: '3',\n          title: 'followers',\n          count: '83'\n        }]\n      },\n      postsMasonry: {},\n      following: [],\n      followers: []\n    };\n    return _this;\n  }\n\n  _createClass(Profile, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.fetchUserDetails(this.props.userDetails);\n      this.willFocusSubscription = this.props.navigation.addListener('willFocus', function () {\n        _this2.fetchUserDetails(_this2.props.userDetails);\n      });\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      if (this.props.isUploaded) {\n        Alert.alert('POST UPLOADED');\n        this.props.navigation.navigate('Profile');\n      }\n\n      if (!this.props.isUploaded && !this.props.isLoading) {\n        Alert.alert(this.props.errMsg);\n      }\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(newProps) {\n      if (newProps.isUploaded !== this.props.isUploaded) {\n        console.log('bibi');\n        this.fetchUserDetails(this.props.userDetails);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.willFocusSubscription.remove();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(ScrollView, {\n        style: styles.scroll,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 482,\n          columnNumber: 7\n        }\n      }, React.createElement(View, {\n        style: [styles.container, this.props.containerStyle],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 484,\n          columnNumber: 9\n        }\n      }, React.createElement(View, {\n        style: styles.cardContainer,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 485,\n          columnNumber: 11\n        }\n      }, this.renderContactHeader(), React.createElement(TabView, {\n        style: [styles.tabContainer, this.props.tabContainerStyle],\n        navigationState: this.state.tabs,\n        renderScene: this.renderScene,\n        renderTabBar: this.renderTabBar,\n        onIndexChange: this.handleIndexChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 488,\n          columnNumber: 13\n        }\n      }))));\n    }\n  }]);\n\n  return Profile;\n}(Component);\n\nProfile.navigationOptions = {\n  tabBarIcon: function tabBarIcon(_ref3) {\n    var tintColor = _ref3.tintColor;\n    return React.createElement(Icon, {\n      name: \"person\",\n      style: {\n        color: tintColor\n      },\n      __self: Profile,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }\n    });\n  }\n};\n\nvar mapStatetoProps = function mapStatetoProps(state) {\n  return {\n    authToken: state.loginReducer.authToken,\n    userDetails: state.loginReducer.userDetails,\n    isLoading: state.postsReducer.isLoading,\n    isUploaded: state.postsReducer.isUploaded,\n    errMsg: state.postsReducer.errMsg\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    logout: function logout() {\n      return dispatch(_logout());\n    },\n    uploadpost: function uploadpost(Data) {\n      return dispatch(_uploadpost(Data));\n    }\n  };\n};\n\nexport default connect(mapStatetoProps, mapDispatchToProps)(Profile);","map":{"version":3,"sources":["/Users/mac/mob/InstaClone/src/Screens/Profile/Profile.js"],"names":["React","Component","AsyncStorage","uploadpost","swal","TabView","TabBar","TabViewPagerScroll","TabViewPagerPan","PropTypes","image","profileStyles","ImageProfil","require","styles","StyleSheet","create","Item","Input","Posts","connect","NavigationContainer","axios","logout","Icon","Profile","props","fetchUserDetails","user_id","console","log","method","url","baseURL","data","userid","then","res","setState","name","results","username","bio","post","posts","urlpost","reversePosts","reverse","followers","following","followersnumber","state","length","followingnumber","newroutes","tabs","routes","count","catch","err","ModifyNumber","newtabs","newroute","Upload","title","text","content","element","attributes","value","type","button","closeModal","Url","icon","Description","description","id","date","Date","toISOString","message","onPressPlace","LogOut","navigation","navigate","handleIndexChange","index","renderTabBar","indicatorTab","renderLabel","tabBar","route","navigationState","labels","forEach","e","push","currentIndex","parseInt","key","color","tabLabelText","tabLabelNumber","renderScene","renderMansonry2Col","map","user","renderContactHeader","headerContainer","item","userRow","userImage","uri","item2","height","marginTop","marginRight","userNameRow","userNameText","userBioRow","userBioText","masonryContainer","sceneContainer","authToken","userDetails","postsMasonry","willFocusSubscription","addListener","isUploaded","Alert","alert","isLoading","errMsg","newProps","remove","scroll","container","containerStyle","cardContainer","tabContainer","tabContainerStyle","navigationOptions","tabBarIcon","tintColor","mapStatetoProps","loginReducer","postsReducer","mapDispatchToProps","dispatch","Data"],"mappings":"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","sourcesContent":["\n\n\n\nimport React, { Component } from 'react'\nimport { Animated,Image,TextInput, Button, ScrollView,Alert ,StyleSheet,Text,View,AsyncStorage} from 'react-native';\n\n//import {AsyncStorage} from \"@react-native-community/async-storage\"\n//import { Icon } from 'react-native-elements'\nimport {uploadpost} from '../../actions/postsActions';\nimport swal from 'sweetalert';\n\nimport {\n  TabView,\n  TabBar,\n  TabViewPagerScroll,\n  TabViewPagerPan,\n} from 'react-native-tab-view'\nimport PropTypes from 'prop-types'\nimport { image } from './utils'\nimport profileStyles from './ProfileStyle'\nexport const ImageProfil = require('./images/photo_cv.jpg'); \nconst styles = StyleSheet.create({ ...profileStyles })\nimport {Item,Input} from 'native-base'\nimport Posts from './Posts'\nimport { connect } from 'react-redux';\nimport { NavigationContainer } from '@react-navigation/native'\nimport axios from'axios'\nimport { logout } from '../../actions/loginActions';\n\n\n\nimport {Icon } from 'native-base'\n\n \nclass Profile extends Component {\n\n  constructor(props){\n    super(props);\n      this.state={\n        authToken:this.props.authToken,  \n        id:this.props.userDetails,\n        name:\"\",\n        url:\"\",\n        description:\"\",\n        username:\"\",\n        urlpost:\"\",\n        bio:\"\",\n        post:\"\",\n        posts:[],\n        tabs: {\n          index: 0,\n          routes: [\n            \n            { key: '1', title: 'Posts', count: '5'},\n            { key: '2', title: 'following', count: '192 M' },\n            { key: '3', title: 'followers', count: '83' },\n          ],\n        },\n        postsMasonry: {},\n\n        following : [],\n\n        followers : []\n        \n      }\n      \n  }\n\n\n  static navigationOptions = {\n\n    tabBarIcon: ({ tintColor }) => (\n        <Icon name=\"person\" style={{ color: tintColor }} />\n    )\n  }\n\n  fetchUserDetails= (user_id)=> {\n    console.log('dkhaaaal');\n    console.log(user_id);\n   /*axios.post(\"http://localhost:3000/getUserDetails\",{\n  params: {\n    userid: user_id\n  }})*/\n  axios({\n    method: 'post',\n    url: '/getUserDetails',\n    baseURL: 'http://localhost:3000',\n    data: { \n      userid: user_id\n     \n      }\n  })\n    .then(res=>{\n        console.log(res);\n        this.setState({name:res.data.results[0].name});\n        this.setState({url:res.data.results[0].url});\n        this.setState({username:res.data.results[0].username});\n        this.setState({bio:res.data.results[0].bio});\n        this.setState({post:res.data.results[0].posts[0].urlpost});\n        \n\n        const reversePosts=res.data.results[0].posts.reverse();\n\n        this.setState({posts:reversePosts});\n\n        this.setState({followers:res.data.results[0].followers});\n        this.setState({following:res.data.results[0].following});\n        var followersnumber=this.state.followers.length;\n        var followingnumber=this.state.following.length;\n        var newroutes=[...this.state.tabs.routes];\n        newroutes[0].count=this.state.posts.length-1;\n        newroutes[1].count=followingnumber;\n        newroutes[2].count=followersnumber;\n        this.setState({\n          tabs: {\n            ...this.state.tabs,\n            newroutes,\n          },\n        })\n        \n        \n        \n    })\n    .catch(err=>console.log(err))\n}\nModifyNumber= (tabs) => {\n\n       var newtabs=[...tabs];\n       console.log(newtabs)\n       var newroutes=[...newtabs.routes];\n        var newroute=[...newroutes[0]];\n        newroute.count=reversePosts.length;\n        this.setState({tabs:newtabs});\n\n}\n\nUpload =() => {\n\n  swal({\n    \n    title: 'Upload Post',\n    text: \"Url\",    \n    content: {\n      element: \"input\",\n      attributes: {\n        value:\"Url\",\n        type: \"Url\",\n      },\n    },\n    button: {\n      text: \"Upload\",\n      closeModal: false,\n    },\n  })\n  \n  .then((Url) => {\n     const url = Url;\n\n    swal({\n    \n      title: 'UploadPost:',\n      text: \"Description\",    \n      icon:Url,\n      content: {\n        element: \"input\",\n        attributes: {\n          value:\"\",\n          type: \"Description\",\n        },\n      },\n      button: {\n        text: \"Upload\",\n        closeModal: false,\n      },\n    })\n    .then((Description) => {\n      const description=Description\n      axios({\n        method: 'post',\n        url: '/uploadpost',\n        baseURL: 'http://localhost:3000',\n        data: { \n          id:this.state.id,\n          urlpost:url,\n          description:description,\n          date:new Date().toISOString()\n\n          }\n      })\n      \n    .then(res=>{\n           \n      \n      const message=res.data.message;\n      console.log(message)\n      if(res.data.value){\n        \n        swal(message);\n        \n      }\n      \n  })\n  .catch(err=>console.log(err))\n\n    })\n\n})  \n     \n    }\n\n\n \n  \n  \n\n\n/*UploadPost = () => {\n\n  const Data = {\n   id:this.props.userDetails,\n   urlpost: this.state.urlpost,\n   description:this.state.description,\n   date:new Date().toISOString()\n    \n  }\n  // calling signup() dispatch\n  \n  this.props.uploadpost(Data);\n}*/\n\n\n  onPressPlace = () => {\n    console.log('place')\n  }\n  componentDidMount () {\n    \n    this.fetchUserDetails(this.props.userDetails);\n   \n   \n    this.willFocusSubscription = this.props.navigation.addListener(\n      'willFocus',\n      () => {\n        this.fetchUserDetails(this.props.userDetails);\n        \n      }\n    );\n  }\n\n  componentDidUpdate() {\n    if (this.props.isUploaded) {\n      Alert.alert('POST UPLOADED');\n      this.props.navigation.navigate('Profile');\n    }\n     if (!this.props.isUploaded && !this.props.isLoading) {\n      Alert.alert(this.props.errMsg);\n    }\n  };\n\n  componentWillReceiveProps(newProps) {\n    if (newProps.isUploaded !== this.props.isUploaded) {\n      console.log('bibi')\n      this.fetchUserDetails(this.props.userDetails);\n    }\n  }\n\n  componentWillUnmount() {\n   \n    this.willFocusSubscription.remove();\n  } \n\n  \n\n  LogOut = () =>{\n    this.props.logout();\n     this.props.navigation.navigate('LogIn');\n  }\n  handleIndexChange = index => {\n    this.setState({\n      tabs: {\n        ...this.state.tabs,\n        index,\n      },\n    })\n  }\n\n  renderTabBar = props => {\n    return <TabBar\n      indicatorStyle={styles.indicatorTab}\n      renderLabel={this.renderLabel(props)}\n      pressOpacity={0.8}\n      style={styles.tabBar}\n      {...props}\n    />\n  };\n\n  renderLabel = props => ({ route }) => {\n    const routes = props.navigationState.routes\n\n    let labels = []\n    routes.forEach((e, index) => {\n      labels.push(index === props.navigationState.index ? 'black' : 'gray')\n    })\n\n    const currentIndex = parseInt(route.key) - 1\n    const color = labels[currentIndex]\n\n    return (\n      <View>\n        <Animated.Text style={[styles.tabLabelText, { color }]}>\n          {route.count}\n        </Animated.Text>\n        <Animated.Text style={[styles.tabLabelNumber, { color }]}>\n          {route.title}\n        </Animated.Text>\n      </View>\n    )\n  }\n\n  renderScene = ({ route: { key } }) => {\n    const { posts } = this.props\n\n    switch (key) {\n        case '1':\n            return this.renderMansonry2Col()\n        case '2':\n          return  <View> <ScrollView>  {this.following()} </ScrollView> </View>\n        case '3':\n          return  <View> <ScrollView>  {this.followers()} </ScrollView> </View>\n      \n      default:\n        return <View />\n    }\n  }\n\n\n  following = () => {\n\n\n    return this.state.following.map((user,index) => {\n      return (\n\n        <View>   \n       \n        <Text>  {user.name.username}  </Text> </View>\n            \n        \n                \n      );\n    });\n\n  }\n\n\n  followers = () => {\n\n\n    return this.state.followers.map((user,index) => {\n      return (\n\n        <View>   \n       \n        <Text>  {user.name.username}  </Text> </View>\n            \n        \n                \n      );\n    });\n\n  }\n \n\n\n \n  renderContactHeader = () => {\n    //const { avatar, name, bio } = this.props\n\n    return (\n      <View style={styles.headerContainer}>\n        \n        <View style={styles.item}>\n        <View style={styles.userRow}>\n              <Image\n                style={styles.userImage}\n                source={{uri:this.state.url}}\n              />\n             </View>\n             \n          </View>\n          \n          <View style={styles.item2}>\n            <View style={{ height: 70, marginTop: 10 , marginRight:50}}>\n            <Button\n          title=\"logout\" \n          onPress={this.LogOut} \n        />\n           { /*<Button\n          title=\"Edit Profile\" \n          onPress={() => this.props.navigation.navigate('EditProfile')} \n        />*/}\n             \n    </View>\n    \n    <View style={styles.userRow} >\n    {/*<TextInput style={styles.TextInputurl} style={{ height: 30, marginTop: 10 , marginBottom: 10 , marginRight:1}}\n                    placeholder=\"urlpost\"\n                    onChangeText={ text => this.setState({urlpost: text})}\n                    value={this.state.urlpost} \n                /> \n\n<TextInput style={styles.TextInputurl} style={{ height: 30, marginTop: 10 , marginBottom: 10 , marginRight:1}}\n                    placeholder=\"Description\"\n                    onChangeText={ text => this.setState({description: text})}\n                    value={this.state.description} \n                />   */}         \n                \n                <Button\n                onPress={this.Upload }\n                   title=\"upload post\"  \n                />  \n    </View>\n          <View style={styles.userRow}>\n               \n               \n                \n                 <View style={styles.userNameRow}>\n                 \n                      <Text style={styles.userNameText}>{this.state.name}</Text>\n                  </View>\n                  <View style={styles.userNameRow}>\n                 \n                      <Text style={styles.userNameText}>@{this.state.username}</Text>\n                      \n                  </View>\n                  <View style={styles.userBioRow}>\n                       <Text style={styles.userBioText}>{this.state.bio}</Text>\n                        \n                   </View>\n              </View>\n          </View> \n      </View>\n      \n    )\n  }\n  \n  renderMansonry2Col = () => {\n    \n     if(this.state.posts.length < 2 ){\n          return(\n            <View><Text>AUCUN POST </Text></View>\n          )\n    }\n    else {\n    return (\n      <View style={styles.masonryContainer}>\n        <View>\n        \n          <Posts\n            containerStyle={styles.sceneContainer}\n           // posts={this.state.postsMasonry.leftCol}\n           posts={this.state.posts}\n           userid={this.state.id}\n          />\n        </View>\n        {/*<View>\n          <Posts\n            containerStyle={styles.sceneContainer}\n            //posts={this.state.postsMasonry.rightCol}\n          />\n        </View>*/}\n      </View>\n    )\n      }\n    \n  }\n\n\n  render() {\n    return (\n    \n  \n      <ScrollView style={styles.scroll}>\n        \n        <View style={[styles.container, this.props.containerStyle]}>\n          <View style={styles.cardContainer}>\n            {this.renderContactHeader()}\n            \n            <TabView\n              style={[styles.tabContainer, this.props.tabContainerStyle]}\n              navigationState={this.state.tabs}\n              renderScene={this.renderScene}\n              renderTabBar={this.renderTabBar}\n              onIndexChange={this.handleIndexChange}\n            />\n          </View>\n        </View>\n      </ScrollView>\n    )\n  }\n}\n\n\n \n const mapStatetoProps=(state)=>{\n  return{\n    authToken: state.loginReducer.authToken,\n    userDetails: state.loginReducer.userDetails,\n    isLoading: state.postsReducer.isLoading,\n    isUploaded: state.postsReducer.isUploaded,\n    errMsg: state.postsReducer.errMsg,\n   \n  }\n }\n const mapDispatchToProps = dispatch => {\n  return {\n    // only map needed dispatches here\n    logout: () => dispatch(logout()),\n    uploadpost: Data => dispatch(uploadpost(Data)),\n  }\n}\n \n\n export default connect(mapStatetoProps,mapDispatchToProps) (Profile);\n"]},"metadata":{},"sourceType":"module"}