{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/sanata/Desktop/InpGram/InstaClone/src/Screens/Profile/addPost.js\";\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useContext } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport ActionButton from \"react-native-action-button\";\nimport Icon from \"@expo/vector-icons/Ionicons\";\nimport ImagePicker from \"react-native-image-crop-picker\";\nimport { InputField, InputWrapper, AddImage, SubmitBtn, SubmitBtnText, StatusWrapper } from \"./addPostStyle\";\n\nvar AddPostScreen = function AddPostScreen() {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      image = _useState2[0],\n      setImage = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      uploading = _useState4[0],\n      setUploading = _useState4[1];\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      transferred = _useState6[0],\n      setTransferred = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      post = _useState8[0],\n      setPost = _useState8[1];\n\n  var takePhotoFromCamera = function takePhotoFromCamera() {\n    ImagePicker.openCamera({\n      width: 1200,\n      height: 780,\n      cropping: true\n    }).then(function (image) {\n      console.log(image);\n      var imageUri = Platform.OS === \"ios\" ? image.sourceURL : image.path;\n      setImage(imageUri);\n    });\n  };\n\n  var choosePhotoFromLibrary = function choosePhotoFromLibrary() {\n    ImagePicker.openPicker({\n      width: 1200,\n      height: 780,\n      cropping: true\n    }).then(function (image) {\n      console.log(image);\n      var imageUri = Platform.OS === \"ios\" ? image.sourceURL : image.path;\n      setImage(imageUri);\n    });\n  };\n\n  var submitPost = function submitPost() {\n    var imageUrl;\n    return _regeneratorRuntime.async(function submitPost$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(uploadImage());\n\n          case 2:\n            imageUrl = _context.sent;\n            console.log(\"Image Url: \", imageUrl);\n            console.log(\"Post: \", post);\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var uploadImage = function uploadImage() {\n    return _regeneratorRuntime.async(function uploadImage$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return React.createElement(View, {\n    style: styles.container,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 5\n    }\n  }, React.createElement(InputWrapper, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }\n  }, image != null ? React.createElement(AddImage, {\n    source: {\n      uri: image\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 26\n    }\n  }) : null, React.createElement(InputField, {\n    placeholder: \"What's on your mind?\",\n    multiline: true,\n    numberOfLines: 4,\n    value: post,\n    onChangeText: function onChangeText(content) {\n      return setPost(content);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 9\n    }\n  }), uploading ? React.createElement(StatusWrapper, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 11\n    }\n  }, React.createElement(Text, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 13\n    }\n  }, transferred, \" % Completed!\"), React.createElement(ActivityIndicator, {\n    size: \"large\",\n    color: \"#0000ff\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 13\n    }\n  })) : React.createElement(SubmitBtn, {\n    onPress: submitPost,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 11\n    }\n  }, React.createElement(SubmitBtnText, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }\n  }, \"Post\"))), React.createElement(ActionButton, {\n    buttonColor: \"#2e64e5\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }\n  }, React.createElement(ActionButton.Item, {\n    buttonColor: \"#9b59b6\",\n    title: \"Take Photo\",\n    onPress: takePhotoFromCamera,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 9\n    }\n  }, React.createElement(Icon, {\n    name: \"camera-outline\",\n    style: styles.actionButtonIcon,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 11\n    }\n  })), React.createElement(ActionButton.Item, {\n    buttonColor: \"#3498db\",\n    title: \"Choose Photo\",\n    onPress: choosePhotoFromLibrary,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 9\n    }\n  }, React.createElement(Icon, {\n    name: \"md-images-outline\",\n    style: styles.actionButtonIcon,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 11\n    }\n  }))));\n};\n\nexport default AddPostScreen;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  actionButtonIcon: {\n    fontSize: 20,\n    height: 22,\n    color: \"white\"\n  }\n});","map":{"version":3,"sources":["/home/sanata/Desktop/InpGram/InstaClone/src/Screens/Profile/addPost.js"],"names":["React","useState","useContext","ActionButton","Icon","ImagePicker","InputField","InputWrapper","AddImage","SubmitBtn","SubmitBtnText","StatusWrapper","AddPostScreen","image","setImage","uploading","setUploading","transferred","setTransferred","post","setPost","takePhotoFromCamera","openCamera","width","height","cropping","then","console","log","imageUri","Platform","OS","sourceURL","path","choosePhotoFromLibrary","openPicker","submitPost","uploadImage","imageUrl","styles","container","uri","content","actionButtonIcon","StyleSheet","create","flex","alignItems","justifyContent","fontSize","color"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from \"react\";\nimport {\n  View,\n  Text,\n  Platform,\n  StyleSheet,\n  Alert,\n  ActivityIndicator,\n} from \"react-native\";\nimport ActionButton from \"react-native-action-button\";\n\nimport Icon from \"react-native-vector-icons/Ionicons\";\nimport ImagePicker from \"react-native-image-crop-picker\";\n\n//import storage from \"@react-native-firebase/storage\";\n//import firestore from \"@react-native-firebase/firestore\";\n\nimport {\n  InputField,\n  InputWrapper,\n  AddImage,\n  SubmitBtn,\n  SubmitBtnText,\n  StatusWrapper,\n} from \"./addPostStyle\";\n\n//import { AuthContext } from \"../navigation/AuthProvider\";\n\nconst AddPostScreen = () => {\n  // const { user, logout } = useContext(AuthContext);\n\n  const [image, setImage] = useState(null);\n  const [uploading, setUploading] = useState(false);\n  const [transferred, setTransferred] = useState(0);\n  const [post, setPost] = useState(null);\n\n  const takePhotoFromCamera = () => {\n    ImagePicker.openCamera({\n      width: 1200,\n      height: 780,\n      cropping: true,\n    }).then((image) => {\n      console.log(image);\n      const imageUri = Platform.OS === \"ios\" ? image.sourceURL : image.path;\n      setImage(imageUri);\n    });\n  };\n\n  const choosePhotoFromLibrary = () => {\n    ImagePicker.openPicker({\n      width: 1200,\n      height: 780,\n      cropping: true,\n    }).then((image) => {\n      console.log(image);\n      const imageUri = Platform.OS === \"ios\" ? image.sourceURL : image.path;\n      setImage(imageUri);\n    });\n  };\n\n  const submitPost = async () => {\n    const imageUrl = await uploadImage();\n    console.log(\"Image Url: \", imageUrl);\n    console.log(\"Post: \", post);\n\n    /* firestore()\n      .collection(\"posts\")\n      .add({\n        userId: user.uid,\n        post: post,\n        postImg: imageUrl,\n        postTime: firestore.Timestamp.fromDate(new Date()),\n        likes: null,\n        comments: null,\n      })\n      .then(() => {\n        console.log(\"Post Added!\");\n        Alert.alert(\n          \"Post published!\",\n          \"Your post has been published Successfully!\"\n        );\n        setPost(null);\n      })\n      .catch((error) => {\n        console.log(\n          \"Something went wrong with added post to firestore.\",\n          error\n        );\n      });*/\n  };\n\n  const uploadImage = async () => {\n    /*\n    if (image == null) {\n      return null;\n    }\n    const uploadUri = image;\n    let filename = uploadUri.substring(uploadUri.lastIndexOf(\"/\") + 1);\n\n    // Add timestamp to File Name\n    const extension = filename.split(\".\").pop();\n    const name = filename.split(\".\").slice(0, -1).join(\".\");\n    filename = name + Date.now() + \".\" + extension;\n\n    setUploading(true);\n    setTransferred(0);\n\n    const storageRef = storage().ref(`photos/${filename}`);\n    const task = storageRef.putFile(uploadUri);\n\n    // Set transferred state\n    task.on(\"state_changed\", (taskSnapshot) => {\n      console.log(\n        `${taskSnapshot.bytesTransferred} transferred out of ${taskSnapshot.totalBytes}`\n      );\n\n      setTransferred(\n        Math.round(taskSnapshot.bytesTransferred / taskSnapshot.totalBytes) *\n          100\n      );\n    });\n\n    try {\n      await task;\n\n      const url = await storageRef.getDownloadURL();\n\n      setUploading(false);\n      setImage(null);\n\n      // Alert.alert(\n      //   'Image uploaded!',\n      //   'Your image has been uploaded to the Firebase Cloud Storage Successfully!',\n      // );\n      return url;\n    } catch (e) {\n      console.log(e);\n      return null;\n    }*/\n  };\n\n  return (\n    <View style={styles.container}>\n      <InputWrapper>\n        {image != null ? <AddImage source={{ uri: image }} /> : null}\n\n        <InputField\n          placeholder=\"What's on your mind?\"\n          multiline\n          numberOfLines={4}\n          value={post}\n          onChangeText={(content) => setPost(content)}\n        />\n        {uploading ? (\n          <StatusWrapper>\n            <Text>{transferred} % Completed!</Text>\n            <ActivityIndicator size=\"large\" color=\"#0000ff\" />\n          </StatusWrapper>\n        ) : (\n          <SubmitBtn onPress={submitPost}>\n            <SubmitBtnText>Post</SubmitBtnText>\n          </SubmitBtn>\n        )}\n      </InputWrapper>\n      <ActionButton buttonColor=\"#2e64e5\">\n        <ActionButton.Item\n          buttonColor=\"#9b59b6\"\n          title=\"Take Photo\"\n          onPress={takePhotoFromCamera}\n        >\n          <Icon name=\"camera-outline\" style={styles.actionButtonIcon} />\n        </ActionButton.Item>\n        <ActionButton.Item\n          buttonColor=\"#3498db\"\n          title=\"Choose Photo\"\n          onPress={choosePhotoFromLibrary}\n        >\n          <Icon name=\"md-images-outline\" style={styles.actionButtonIcon} />\n        </ActionButton.Item>\n      </ActionButton>\n    </View>\n  );\n};\n\nexport default AddPostScreen;\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  actionButtonIcon: {\n    fontSize: 20,\n    height: 22,\n    color: \"white\",\n  },\n});\n"]},"metadata":{},"sourceType":"module"}