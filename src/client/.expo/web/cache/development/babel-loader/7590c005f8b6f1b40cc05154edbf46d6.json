{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/home/sanata/Desktop/InpGram/InstaClone/src/Screens/Home/Home.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { Component } from \"react\";\nimport AsyncStorage from \"@react-native-community/async-storage\";\nimport React, { useState, useRef, useEffect } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { Header } from \"react-native-web/dist/index\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport AuthStyle from \"./AuthStyle\";\nimport { connect } from \"react-redux\";\nimport axios from \"axios\";\nimport { Container, Content, Icon, Thumbnail } from \"native-base\";\nimport instalogo from \"./insta.png\";\nimport dm from \"./dm.png\";\nimport PostComponent from \"./PostComponent\";\nimport { isLogedIn } from \"../../actions/AuthActions\";\nimport User from \"../../serveur/models/user.model\";\nimport { listUsers } from \"../../actions/followActions\";\n\nvar Home = function (_Component) {\n  _inherits(Home, _Component);\n\n  var _super = _createSuper(Home);\n\n  function Home(props) {\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    _this = _super.call(this, props);\n    _this.list = [];\n\n    _this.getIdValue = function _callee() {\n      var value;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"Id\"));\n\n            case 2:\n              value = _context.sent;\n              return _context.abrupt(\"return\", value);\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.listUsers = function () {\n      axios({\n        method: \"post\",\n        url: \"/listUsers\",\n        baseURL: \"http://10.200.14.241:3000\"\n      }).then(function (res) {\n        _this.setState({\n          data: res.data.lista\n        });\n      }).catch(function (err) {\n        console.log(err.message);\n      });\n    };\n\n    _this.listPosts = function () {\n      axios({\n        method: \"post\",\n        url: \"/listPosts\",\n        baseURL: \"http://localhost:3000\",\n        data: {\n          Id: getIdValue\n        }\n      }).then(function (res) {\n        console.log(res.data.totalPosts);\n\n        _this.setState({\n          posts: res.data.totalPosts\n        });\n      }).catch(function (err) {\n        console.log(err.message);\n      });\n    };\n\n    _this.verifyConnexion = function () {\n      if (!isLogedIn()) {\n        _this.props.navigation.navigate(\"LogIn\");\n      }\n    };\n\n    _this.renderUsers = function (users) {\n      console.log(\"dataaa\");\n      console.log(users);\n      return users.map(function (user, index) {\n        return React.createElement(View, {\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 9\n          }\n        }, React.createElement(Text, {\n          style: {\n            marginHorizontal: 5,\n            borderColor: \"pink\",\n            borderWidth: 2,\n            fontSize: 20\n          },\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 11\n          }\n        }, \" \", user.name, \" \"), React.createElement(Button, {\n          title: user.follow ? \"unfollow\" : \"follow\",\n          style: {\n            marginHorizontal: 5,\n            width: 10,\n            height: 10\n          },\n          onPress: function onPress() {\n            console.log(user.Id);\n            axios({\n              method: \"post\",\n              url: \"/follow\",\n              baseURL: \"http://10.200.14.241:3000\",\n              data: {\n                Id: getIdValue,\n                followId: user.Id\n              }\n            }).then(function (res) {\n              console.log(res.message);\n            }).catch(function (err) {\n              console.log(err.message);\n            });\n          },\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 11\n          }\n        }));\n      });\n    };\n\n    _this.renderPosts = function (posts) {\n      return posts.map(function (post, index) {\n        var name = post.username;\n        var url = post.posts;\n        return React.createElement(PostComponent, {\n          imageSource: url,\n          likes: \"101\",\n          username: name,\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 14\n          }\n        });\n      });\n    };\n\n    _this.state = {\n      data: [],\n      posts: []\n    };\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.verifyConnexion();\n      this.willFocusSubscription = this.props.navigation.addListener(\"willFocus\", function () {\n        _this2.verifyConnexion();\n      });\n      this.listUsers();\n      this.listPosts();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.willFocusSubscription.remove();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(View, {\n        style: {\n          flex: 1,\n          height: 100,\n          backgroundColor: \"white\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 7\n        }\n      }, React.createElement(Image, {\n        source: instalogo,\n        style: {\n          width: 120,\n          height: 35,\n          marginLeft: 20,\n          tintColor: \"black\",\n          marginTop: 10,\n          marginBottom: 10\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 9\n        }\n      }), React.createElement(Image, {\n        source: dm,\n        style: {\n          width: 25,\n          height: 25,\n          marginRight: 20,\n          alignSelf: \"flex-end\",\n          tintColor: \"black\",\n          marginTop: -40\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 9\n        }\n      }), React.createElement(Container, {\n        style: styles.container,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 9\n        }\n      }, React.createElement(Content, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 11\n        }\n      }, React.createElement(View, {\n        style: {\n          height: 100\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 13\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 3\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 15\n        }\n      }, React.createElement(ScrollView, {\n        horizontal: true,\n        showsHorizontalScrollIndicator: false,\n        contentContainerStyle: {\n          alignItems: \"center\",\n          paddingStart: 5,\n          paddingEnd: 5\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 17\n        }\n      }, this.renderUsers(this.state.data)))), React.createElement(View, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 13\n        }\n      }, this.renderPosts(this.state.posts)))));\n    }\n  }]);\n\n  return Home;\n}(Component);\n\nHome.navigationOptions = {\n  tabBarIcon: function tabBarIcon(_ref) {\n    var tintColor = _ref.tintColor;\n    return React.createElement(Icon, {\n      name: \"ios-home\",\n      style: {\n        color: tintColor\n      },\n      __self: Home,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 7\n      }\n    });\n  }\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"white\",\n    marginTop: 15\n  }\n});\nexport default Home;","map":{"version":3,"sources":["/home/sanata/Desktop/InpGram/InstaClone/src/Screens/Home/Home.js"],"names":["Component","AsyncStorage","React","useState","useRef","useEffect","Header","AuthStyle","connect","axios","Container","Content","Icon","Thumbnail","instalogo","dm","PostComponent","isLogedIn","User","listUsers","Home","props","list","getIdValue","getItem","value","method","url","baseURL","then","res","setState","data","lista","catch","err","console","log","message","listPosts","Id","totalPosts","posts","verifyConnexion","navigation","navigate","renderUsers","users","map","user","index","marginHorizontal","borderColor","borderWidth","fontSize","name","follow","width","height","followId","renderPosts","post","username","state","willFocusSubscription","addListener","remove","flex","backgroundColor","marginLeft","tintColor","marginTop","marginBottom","marginRight","alignSelf","styles","container","alignItems","paddingStart","paddingEnd","navigationOptions","tabBarIcon","color","StyleSheet","create"],"mappings":"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","sourcesContent":["import { Component } from \"react\";\nimport AsyncStorage from \"@react-native-community/async-storage\";\nimport React, { useState, useRef, useEffect } from \"react\";\nimport {\n  View,\n  Button,\n  TextInput,\n  Text,\n  Alert,\n  StyleSheet,\n  Header,\n  Image,\n  ScrollView,\n} from \"react-native\";\nimport AuthStyle from \"./AuthStyle\";\nimport { connect } from \"react-redux\";\n\nimport axios from \"axios\";\n\nimport { Container, Content, Icon, Thumbnail } from \"native-base\";\n\nimport instalogo from \"./insta.png\";\n\nimport dm from \"./dm.png\";\n\nimport PostComponent from \"./PostComponent\";\n\nimport { isLogedIn } from \"../../actions/AuthActions\";\nimport User from \"../../serveur/models/user.model\";\n\nimport { listUsers } from \"../../actions/followActions\";\n\nclass Home extends Component {\n  list = [];\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      data: [],\n      posts: [],\n    };\n  }\n\n  getIdValue = async () => {\n    var value = await AsyncStorage.getItem(\"Id\");\n    return value;\n  };\n\n  listUsers = () => {\n    axios({\n      method: \"post\",\n      url: \"/listUsers\",\n      baseURL: \"http://10.200.14.241:3000\",\n      //baseURL: \"http://localhost:3000\",\n    })\n      .then((res) => {\n        //console.log(res.data.lista);\n\n        this.setState({ data: res.data.lista });\n      })\n\n      .catch((err) => {\n        console.log(err.message);\n      });\n  };\n\n  listPosts = () => {\n    axios({\n      method: \"post\",\n      url: \"/listPosts\",\n\n      baseURL: \"http://localhost:3000\",\n      data: {\n        Id: getIdValue,\n      },\n    })\n      .then((res) => {\n        console.log(res.data.totalPosts);\n\n        this.setState({ posts: res.data.totalPosts });\n      })\n\n      .catch((err) => {\n        console.log(err.message);\n      });\n  };\n\n  verifyConnexion = () => {\n    if (!isLogedIn()) {\n      this.props.navigation.navigate(\"LogIn\");\n    }\n  };\n\n  componentDidMount() {\n    this.verifyConnexion();\n    this.willFocusSubscription = this.props.navigation.addListener(\n      \"willFocus\",\n      () => {\n        this.verifyConnexion();\n      }\n    );\n    this.listUsers();\n    this.listPosts();\n  }\n\n  componentWillUnmount() {\n    this.willFocusSubscription.remove();\n  }\n\n  static navigationOptions = {\n    tabBarIcon: ({ tintColor }) => (\n      <Icon name=\"ios-home\" style={{ color: tintColor }} />\n    ),\n  };\n\n  renderUsers = (users) => {\n    console.log(\"dataaa\");\n    console.log(users);\n    return users.map((user, index) => {\n      return (\n        <View>\n          {/* <Thumbnail\n                      style={{ marginHorizontal: 5, borderColor: 'pink', borderWidth: 2 }}\n                      source={require('./me.jpg')} /> */}\n\n          <Text\n            style={{\n              marginHorizontal: 5,\n              borderColor: \"pink\",\n              borderWidth: 2,\n              fontSize: 20,\n            }}\n          >\n            {\" \"}\n            {user.name}{\" \"}\n          </Text>\n          <Button\n            title={user.follow ? \"unfollow\" : \"follow\"}\n            style={{ marginHorizontal: 5, width: 10, height: 10 }}\n            onPress={() => {\n              console.log(user.Id);\n\n              axios({\n                method: \"post\",\n                url: \"/follow\",\n                baseURL: \"http://10.200.14.241:3000\",\n                //baseURL: \"http://localhost:3000\",\n                data: {\n                  Id: getIdValue,\n\n                  followId: user.Id,\n                },\n              })\n                .then((res) => {\n                  //console.log(res.data.lista);\n\n                  console.log(res.message);\n                })\n\n                .catch((err) => {\n                  console.log(err.message);\n                });\n            }}\n          />\n        </View>\n      );\n    });\n  };\n\n  renderPosts = (posts) => {\n    return posts.map((post, index) => {\n      var name = post.username;\n      var url = post.posts;\n\n      return <PostComponent imageSource={url} likes=\"101\" username={name} />;\n\n      /* if(havePosts.length !=0){\n\n         \n\n          havePosts.forEach( post => {\n\n            console.log(post.urlpost);\n\n            return (\n              <View>\n              <PostComponent imageSource={post.urlpost} likes=\"101\" username = {name}/> </View>\n            );\n            \n          });\n\n        }*/\n    });\n  };\n\n  render() {\n    return (\n      <View style={{ flex: 1, height: 100, backgroundColor: \"white\" }}>\n        <Image\n          source={instalogo}\n          style={{\n            width: 120,\n            height: 35,\n            marginLeft: 20,\n            tintColor: \"black\",\n            marginTop: 10,\n            marginBottom: 10,\n          }}\n        ></Image>\n        <Image\n          source={dm}\n          style={{\n            width: 25,\n            height: 25,\n            marginRight: 20,\n            alignSelf: \"flex-end\",\n            tintColor: \"black\",\n            marginTop: -40,\n          }}\n        ></Image>\n\n        <Container style={styles.container}>\n          <Content>\n            <View style={{ height: 100 }}>\n              <View style={{ flex: 3 }}>\n                <ScrollView\n                  horizontal={true}\n                  showsHorizontalScrollIndicator={false}\n                  contentContainerStyle={{\n                    alignItems: \"center\",\n                    paddingStart: 5,\n                    paddingEnd: 5,\n                  }}\n                >\n                  {this.renderUsers(this.state.data)}\n                </ScrollView>\n              </View>\n            </View>\n\n            <View>{this.renderPosts(this.state.posts)}</View>\n\n            {/* <PostComponent imageSource=\"1\" likes=\"101\" />\n                    <PostComponent imageSource=\"2\" likes=\"201\" />\n                    <PostComponent imageSource=\"3\" likes=\"301\" /> */}\n          </Content>\n        </Container>\n      </View>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"white\",\n    marginTop: 15,\n  },\n});\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}