{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/home/amine/Bureau/insta_last/InstaClone/src/client/Screens/Home/Home.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { Component } from \"react\";\nimport AsyncStorage from \"@react-native-community/async-storage\";\nimport React, { useState, useRef, useEffect } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { Header } from \"react-native-web/dist/index\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { connect } from \"react-redux\";\nimport axios from \"axios\";\nimport { Container, Content, Icon, Thumbnail } from \"native-base\";\nimport instalogo from \"../../assets/image/insta.png\";\nimport dm from \"../../assets/image/dm.png\";\nimport PostComponent from \"./PostComponent\";\nimport { isLogedIn } from \"../../actions/AuthActions\";\nimport { baseURL } from \"../../constants\";\n\nvar Home = function (_Component) {\n  _inherits(Home, _Component);\n\n  var _super = _createSuper(Home);\n\n  function Home(props) {\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    _this = _super.call(this, props);\n    _this.list = [];\n\n    _this.getIdValue = function _callee() {\n      var value;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"Id\"));\n\n            case 2:\n              value = _context.sent;\n              _this.Id = value;\n              return _context.abrupt(\"return\", value);\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.listUsers = function () {\n      console.log(\"users\");\n      axios({\n        method: \"post\",\n        url: \"/listUsers\",\n        baseURL: baseURL,\n        data: {\n          Id: _this.Id\n        }\n      }).then(function (res) {\n        _this.setState({\n          data: res.data.lista\n        });\n      }).catch(function (err) {\n        console.log(err.message);\n      });\n    };\n\n    _this.listPosts = function () {\n      console.log(\"poosts\");\n      axios({\n        method: \"post\",\n        url: \"/listPosts\",\n        baseURL: baseURL,\n        data: {\n          Id: _this.Id\n        }\n      }).then(function (res) {\n        _this.setState({\n          posts: res.data.totalPosts\n        });\n      }).catch(function (err) {\n        console.log(err.message);\n      });\n    };\n\n    _this.verifyConnexion = function () {\n      if (!isLogedIn()) {\n        _this.props.navigation.navigate(\"LogIn\");\n      }\n    };\n\n    _this.renderUsers = function (users) {\n      console.log(\"useers\");\n      return users.map(function (user, index) {\n        var followRequest = function followRequest() {\n          axios({\n            method: \"post\",\n            url: \"/follow\",\n            baseURL: baseURL,\n            data: {\n              Id: _this.Id,\n              followId: user.Id\n            }\n          }).then(function (res) {\n            console.log(res.data.message);\n\n            _this.setState({\n              test: 1\n            });\n\n            _this.listUsers();\n\n            _this.listPosts();\n          }).catch(function (err) {\n            console.log(err.message);\n          });\n        };\n\n        var unfollowRequest = function unfollowRequest() {\n          axios({\n            method: \"post\",\n            url: \"/unfollow\",\n            baseURL: baseURL,\n            data: {\n              Id: _this.Id,\n              followId: user.Id\n            }\n          }).then(function (res) {\n            console.log(res.data.message);\n\n            _this.setState({\n              test: 1\n            });\n\n            _this.listUsers();\n\n            _this.listPosts();\n          }).catch(function (err) {\n            console.log(err.message);\n          });\n        };\n\n        var onpress = user.follow ? unfollowRequest : followRequest;\n        var text = user.follow ? \"unfollow\" : \"follow\";\n        return React.createElement(View, {\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 9\n          }\n        }, React.createElement(Text, {\n          style: {\n            marginHorizontal: 5,\n            borderColor: \"dark\",\n            borderWidth: 2,\n            fontSize: 20\n          },\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 11\n          }\n        }, user.name), React.createElement(TouchableOpacity, {\n          style: {\n            marginHorizontal: 5,\n            width: 90,\n            height: 30,\n            backgroundColor: \"#DDDDDD\"\n          },\n          onPress: onpress,\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 11\n          }\n        }, React.createElement(Text, {\n          style: {\n            fontSize: 20\n          },\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 13\n          }\n        }, \" \", text, \" \")));\n      });\n    };\n\n    _this.renderPosts = function (posts) {\n      return posts.map(function (post, index) {\n        var name = post.username;\n        var url = post.posts;\n        var userpicurl = post.picurl;\n        return React.createElement(PostComponent, {\n          imageSource: url,\n          likes: \"101\",\n          username: name,\n          userpicurl: userpicurl,\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 9\n          }\n        });\n      });\n    };\n\n    _this.state = {\n      data: [],\n      posts: [],\n      Id: \"\",\n      test: 0\n    };\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      return _regeneratorRuntime.async(function componentDidMount$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              this.verifyConnexion();\n              this.willFocusSubscription = this.props.navigation.addListener(\"willFocus\", function () {\n                _this2.verifyConnexion();\n              });\n              _context2.next = 4;\n              return _regeneratorRuntime.awrap(this.getIdValue());\n\n            case 4:\n              this.listUsers();\n              this.listPosts();\n              this.render();\n\n            case 7:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.willFocusSubscription.remove();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(View, {\n        style: {\n          flex: 1,\n          height: 100,\n          backgroundColor: \"white\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 7\n        }\n      }, React.createElement(Image, {\n        source: instalogo,\n        style: {\n          width: 120,\n          height: 35,\n          marginLeft: 20,\n          tintColor: \"black\",\n          marginTop: 10,\n          marginBottom: 10\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 9\n        }\n      }), React.createElement(Image, {\n        source: dm,\n        style: {\n          width: 25,\n          height: 25,\n          marginRight: 20,\n          alignSelf: \"flex-end\",\n          tintColor: \"black\",\n          marginTop: -40\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 9\n        }\n      }), React.createElement(Container, {\n        style: styles.container,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 9\n        }\n      }, React.createElement(Content, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 11\n        }\n      }, React.createElement(View, {\n        style: {\n          height: 100\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 13\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 3\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 15\n        }\n      }, React.createElement(ScrollView, {\n        horizontal: true,\n        showsHorizontalScrollIndicator: false,\n        contentContainerStyle: {\n          alignItems: \"center\",\n          paddingStart: 5,\n          paddingEnd: 5\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 17\n        }\n      }, this.renderUsers(this.state.data)))), React.createElement(View, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 13\n        }\n      }, this.renderPosts(this.state.posts)))));\n    }\n  }]);\n\n  return Home;\n}(Component);\n\nHome.navigationOptions = {\n  tabBarIcon: function tabBarIcon(_ref) {\n    var tintColor = _ref.tintColor;\n    return React.createElement(Icon, {\n      name: \"ios-home\",\n      style: {\n        color: tintColor\n      },\n      __self: Home,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 7\n      }\n    });\n  }\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"white\",\n    marginTop: 15\n  }\n});\nexport default Home;","map":{"version":3,"sources":["/home/amine/Bureau/insta_last/InstaClone/src/client/Screens/Home/Home.js"],"names":["Component","AsyncStorage","React","useState","useRef","useEffect","Header","connect","axios","Container","Content","Icon","Thumbnail","instalogo","dm","PostComponent","isLogedIn","baseURL","Home","props","list","getIdValue","getItem","value","Id","listUsers","console","log","method","url","data","then","res","setState","lista","catch","err","message","listPosts","posts","totalPosts","verifyConnexion","navigation","navigate","renderUsers","users","map","user","index","followRequest","followId","test","unfollowRequest","onpress","follow","text","marginHorizontal","borderColor","borderWidth","fontSize","name","width","height","backgroundColor","renderPosts","post","username","userpicurl","picurl","state","willFocusSubscription","addListener","render","remove","flex","marginLeft","tintColor","marginTop","marginBottom","marginRight","alignSelf","styles","container","alignItems","paddingStart","paddingEnd","navigationOptions","tabBarIcon","color","StyleSheet","create"],"mappings":"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","sourcesContent":["import { Component } from \"react\";\nimport AsyncStorage from \"@react-native-community/async-storage\";\nimport React, { useState, useRef, useEffect } from \"react\";\nimport {\n  View,\n  Button,\n  TextInput,\n  Text,\n  Alert,\n  StyleSheet,\n  Header,\n  Image,\n  ScrollView,\n  TouchableOpacity,\n} from \"react-native\";\nimport { connect } from \"react-redux\";\n\nimport axios from \"axios\";\n\nimport { Container, Content, Icon, Thumbnail } from \"native-base\";\n\nimport instalogo from \"../../assets/image/insta.png\";\n\nimport dm from \"../../assets/image/dm.png\";\n\nimport PostComponent from \"./PostComponent\";\n\nimport { isLogedIn } from \"../../actions/AuthActions\";\n\nimport { baseURL } from \"../../constants\";\n\nclass Home extends Component {\n  list = [];\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      data: [],\n      posts: [],\n      Id: \"\",\n      test: 0,\n    };\n  }\n\n  getIdValue = async () => {\n    var value = await AsyncStorage.getItem(\"Id\");\n    this.Id = value;\n    return value;\n  };\n\n  listUsers = () => {\n    console.log(\"users\");\n\n    axios({\n      method: \"post\",\n      url: \"/listUsers\",\n      baseURL: baseURL,\n      data: {\n        Id: this.Id,\n      },\n    })\n      .then((res) => {\n        //console.log(res.data.lista);\n\n        this.setState({ data: res.data.lista });\n      })\n\n      .catch((err) => {\n        console.log(err.message);\n      });\n  };\n\n  listPosts = () => {\n    console.log(\"poosts\");\n    axios({\n      method: \"post\",\n      url: \"/listPosts\",\n\n      baseURL: baseURL,\n      data: {\n        Id: this.Id,\n      },\n    })\n      .then((res) => {\n        this.setState({ posts: res.data.totalPosts });\n      })\n\n      .catch((err) => {\n        console.log(err.message);\n      });\n  };\n\n  verifyConnexion = () => {\n    if (!isLogedIn()) {\n      this.props.navigation.navigate(\"LogIn\");\n    }\n  };\n\n  async componentDidMount() {\n    this.verifyConnexion();\n    this.willFocusSubscription = this.props.navigation.addListener(\n      \"willFocus\",\n      () => {\n        this.verifyConnexion();\n      }\n    );\n    await this.getIdValue();\n    this.listUsers();\n    this.listPosts();\n    this.render();\n  }\n\n  componentWillUnmount() {\n    this.willFocusSubscription.remove();\n  }\n\n  static navigationOptions = {\n    tabBarIcon: ({ tintColor }) => (\n      <Icon name=\"ios-home\" style={{ color: tintColor }} />\n    ),\n  };\n\n  renderUsers = (users) => {\n    console.log(\"useers\");\n    // console.log(users);\n\n    return users.map((user, index) => {\n      let followRequest = () => {\n        axios({\n          method: \"post\",\n          url: \"/follow\",\n          baseURL: baseURL,\n          data: {\n            Id: this.Id,\n\n            followId: user.Id,\n          },\n        })\n          .then((res) => {\n            console.log(res.data.message);\n\n            this.setState({ test: 1 });\n            this.listUsers();\n            this.listPosts();\n          })\n\n          .catch((err) => {\n            console.log(err.message);\n          });\n      };\n\n      let unfollowRequest = () => {\n        axios({\n          method: \"post\",\n          url: \"/unfollow\",\n          baseURL: baseURL,\n          data: {\n            Id: this.Id,\n            followId: user.Id,\n          },\n        })\n          .then((res) => {\n            console.log(res.data.message);\n\n            this.setState({ test: 1 });\n            this.listUsers();\n            this.listPosts();\n          })\n          .catch((err) => {\n            console.log(err.message);\n          });\n      };\n\n      let onpress = user.follow ? unfollowRequest : followRequest;\n      let text = user.follow ? \"unfollow\" : \"follow\";\n      return (\n        <View>\n          <Text\n            style={{\n              marginHorizontal: 5,\n              borderColor: \"dark\",\n              borderWidth: 2,\n              fontSize: 20,\n            }}\n          >\n            {user.name}\n          </Text>\n          <TouchableOpacity\n            style={{\n              marginHorizontal: 5,\n              width: 90,\n              height: 30,\n              backgroundColor: \"#DDDDDD\",\n            }}\n            onPress={onpress}\n          >\n            <Text style={{ fontSize: 20 }}> {text} </Text>\n          </TouchableOpacity>\n        </View>\n      );\n    });\n  };\n\n  renderPosts = (posts) => {\n    return posts.map((post, index) => {\n      var name = post.username;\n      var url = post.posts;\n      var userpicurl = post.picurl;\n\n      return (\n        <PostComponent\n          imageSource={url}\n          likes=\"101\"\n          username={name}\n          userpicurl={userpicurl}\n        />\n      );\n    });\n  };\n\n  render() {\n    return (\n      <View style={{ flex: 1, height: 100, backgroundColor: \"white\" }}>\n        <Image\n          source={instalogo}\n          style={{\n            width: 120,\n            height: 35,\n            marginLeft: 20,\n            tintColor: \"black\",\n            marginTop: 10,\n            marginBottom: 10,\n          }}\n        ></Image>\n        <Image\n          source={dm}\n          style={{\n            width: 25,\n            height: 25,\n            marginRight: 20,\n            alignSelf: \"flex-end\",\n            tintColor: \"black\",\n            marginTop: -40,\n          }}\n        ></Image>\n\n        <Container style={styles.container}>\n          <Content>\n            <View style={{ height: 100 }}>\n              <View style={{ flex: 3 }}>\n                <ScrollView\n                  horizontal={true}\n                  showsHorizontalScrollIndicator={false}\n                  contentContainerStyle={{\n                    alignItems: \"center\",\n                    paddingStart: 5,\n                    paddingEnd: 5,\n                  }}\n                >\n                  {this.renderUsers(this.state.data)}\n                </ScrollView>\n              </View>\n            </View>\n\n            <View>{this.renderPosts(this.state.posts)}</View>\n          </Content>\n        </Container>\n      </View>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"white\",\n    marginTop: 15,\n  },\n});\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}